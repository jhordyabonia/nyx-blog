<div class="content-body" data-bind="scope:'blog'">
    <div class="nyx_post">
        <h2><?=__("New Blog Post")?></h2>          
        <!-- ko if: message()  -->
            <p data-bind="i18n:message,attr:{class:messageClass}" ></p>
        <!-- /ko -->        
        <div class="post-content">
            <div class="fields">
                <div class="field name required">
                    <label class="label" for="title"><span  data-bind="i18n:('New Post Title')"></span></label>
                    <div class="control">
                        <input name="post_title" id="title" attr="{placeholder:'New Post Title'}" autocomplete="false"
                            class="input-text" type="text" data-bind="value:title" required />
                    </div>
                </div>

                <div class="field email">
                    <label class="label" for="email"><span  data-bind="i18n:('Email')"></span></label>
                    <div class="control">
                        <input name="post_email" id="email" attr="{placeholder:'Email'}" data-bind="value:email" autocomplete="false"
                            class="input-text" type="email" required data-validate="{'validate-email':true}"/>
                    </div>
                </div>

                <div class="field comment required">
                    <label class="label" for="comment"><span  data-bind="i18n:('What’s on your mind?')"></span></label>
                    <div class="control">
                        <textarea name="post_details" id="comment" attr="{placeholder:'What’s on your mind?'}" 
                            class="input-text" cols="5" rows="3" data-bind="value:comment" required></textarea>
                    </div>
                </div>

                <div class="field file">
                    <label class="label" for="file"><span  data-bind="i18n:('File')"></span></label>
                    <div class="control">
                        <input name="post_file" id="file" class="input-text" type="file" />
                    </div>
                </div>
            </div>
            <div class="actions">
                <button class="action primary" data-bind="click:submit,enable:canSend()">
                    <span data-bind="i18n:'Save'"></span>
                </button>
            </div>
        </div>
    </div>
    <!-- ko if: postList()  -->
    <!-- ko foreach: postList -->
    <div class="nyx_post">
        <span class="post-date" data-bind="i18n:($data.created_at)"></span>
        <h2>
            <span class="post_title" data-bind="i18n:($data.post_title)"></span>
        </h2>
        <div class="post-content">
            <!-- ko if: $data.post_file -->
                <a data-bind="attr:{href:$parent.getUrl($data.post_file)}" target="_blank">
                    <div>
                        <img class="preview-image"                    
                            css = "background: 'url('+<$parent.getUrl($data.post_file)+')'" 
                            data-bind="attr:{
                                src:$parent.getUrl($data.post_file),
                                alt:'file'}"
                            onerror="this.onerror=null;this.src='data:image/png;base64,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';" >
                    </div>
                </a>
            <!-- /ko -->
            <div class="fetch">
                <p class="post_details comment" data-bind="i18n:($data.post_details)"></p>
            </div>
            <div class="comments">
                <p class="post_comments" data-bind="click:()=>$parent.popupComments.post_id($data.post_id)" >
                    <span data-bind="i18n:'Comments:'"></span> &nbsp; <span data-bind="text: $data.post_id"></span>
                </p>
            </div>
        </div>
    </div>
    <!-- /ko -->
    <!-- /ko -->
    <div class="comment-list-wrapper nyx_post" data-bind="visible: popupComments.post_id">
        <div class="comment-head">
            <h2 class="title" data-bind="text: $t('Do Comment')"></h2>                                    
            <div class="fields">
                <div class="field comment_body required">
                    <label class="label" for="title"><span  data-bind="i18n:('New Comment')"></span></label>
                    <div class="control">
                        <input name="comment_body" id="title" attr="{placeholder:'your comment'}" autocomplete="false"
                            class="input-text" type="text" data-bind="value:popupComments.comment_body" required />
                    </div>
                </div>

                <div class="field author">
                    <label class="label" for="author"><span  data-bind="i18n:('Author')"></span></label>
                    <div class="control">
                        <input name="post_email" id="author" attr="{placeholder:'Author'}" data-bind="value:popupComments.comment_author" autocomplete="false"
                            class="input-text" type="text" required />
                    </div>
                </div>
            </div> 
            <div class="actions">
                <button class="action primary" data-bind="click:popupComments.submit">
                    <span data-bind="i18n:'Send'"></span>
                </button>
            </div>
        </div>
        <!-- ko foreach: popupComments.commentList -->
            <div class="comment-content">
                <div class="comment-body">                    
                    <span data-bind="i18n:$data.comment_body" ></span>
                </div>
                <div class="comment-footer">                                            
                    <span class="comment-author" data-bind="i18n:$data.comment_author"></span>
                    <span class="comment-created_at" data-bind="i18n:$data.created_at" ></span>
                </div>
            </div>
        <!-- /ko -->
    </div>
</div>

<script type="text/javascript">
    window.URL_MEDIA = '<?= \Magento\Framework\UrlInterface::URL_TYPE_MEDIA.'/post/files/'; ?>';
</script>
<script type="text/x-magento-init">
    {
        "*": {
            "Magento_Ui/js/core/app": {
               "components": {
                    "blog": {
                            "component": "NYX_Blog/js/form"
                        }
                    }
                }
            }
    }
</script>
